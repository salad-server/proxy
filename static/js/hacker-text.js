// https://simplehacker.co.uk/hacker-text
const eChars=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9"," ",",",".","-","'",'"',"?","!","\xa3","$","%","^","&","*","(",")","<",">","/","\\","@","#","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],allowedTags=["div","span","h1","h2","h3","h4","h5","p","br","a","strong","em","li","b","i","u","pre","q","s","strike","blockquote","sub","sup"],qSA=document.querySelectorAll(".hacker-text");let hackerTexts=[],decodeInterval=[],pageDecoded;function runDecoding(a){!0===(pageDecoded=allDecoded())?(decodeInterval.forEach(function(a){clearInterval(a)}),console.log("All Hacker-Texts have been decoded.")):!1==a.decoded&&("type"===a.mode?decodeType(a):"stars"===a.mode?decodeStars(a):decode(a))}function decode(a){let b;do randPos=Math.floor(Math.random()*a.hackerText.length);while(a.hackerText[randPos]==a.originalText[randPos])b=selectCorrectChar(a.difficulty)?a.originalText[randPos]:getRandChar(),a.hackerText=decodeCharacter(a.hackerText,randPos,b),a.element.innerHTML=a.hackerText,a.hackerText===a.originalText&&(a.decoded=!0,console.log(`${a.originalText} has finished decoding.`))}function decodeType(a){let b;strLength=a.hackerText.length-2,b=selectCorrectChar(a.difficulty)?a.originalText[strLength]:getRandChar(),a.hackerText=a.hackerText.slice(0,-2),b===a.originalText[strLength]?(a.hackerText+=b,a.hackerText!=a.originalText&&(a.hackerText+=b)):a.hackerText+=b,a.hackerText===a.originalText?(a.decoded=!0,console.log(`${a.originalText} has finished decoding.`)):a.hackerText+="|",a.element.innerHTML=a.hackerText}function decodeStars(a){let b;for(i=0;i<a.originalText.length;i++)if(b=selectCorrectChar(a.difficulty)?a.originalText[i]:getRandChar(),a.hackerText[i]!=a.originalText[i]){a.hackerText=decodeCharacter(a.hackerText,i,b),a.element.innerHTML=a.hackerText;break}a.hackerText===a.originalText&&(a.decoded=!0,console.log(`${a.originalText} has finished decoding.`))}function allDecoded(){let a=!0;return hackerTexts.forEach(function(b,c){!1===b.decoded&&(a=!1)}),a}function decodeCharacter(a,b,c){return a.substring(0,b)+c+a.substring(b+1)}function getRandChar(){return randCharNum=Math.floor(Math.random()*eChars.length),eChars[randCharNum]}function selectCorrectChar(a){return Math.random()<1/a}function encodeText(c){let a="",d=c.length,b;for(i=0;i<d;i++)b=Math.floor(Math.random()*eChars.length),a+=eChars[b];return a}qSA.forEach(function(a,h){if(-1!=allowedTags.indexOf(a.tagName.toLowerCase())){let b=a.innerHTML,c="",e,f,d="default";if(e=a.classList.contains("hacker-text-slow")?50:a.classList.contains("hacker-text-medium")?15:a.classList.contains("hacker-text-fast")?5:15,f=a.classList.contains("hacker-text-easy")?10:a.classList.contains("hacker-text-normal")?20:a.classList.contains("hacker-text-hard")?30:20,a.classList.contains("hacker-text-type"))d="type";else if(a.classList.contains("hacker-text-stars"))for(i=0,d="stars";i<b.length;i++)c+="*";else c=encodeText(b);let g={element:a,originalText:b,hackerText:c,decoded:!1,speed:e,difficulty:f,mode:d};hackerTexts.push(g)}}),hackerTexts.forEach(function(a,b){a.element.innerHTML=a.hackerText,decodeInterval.push(setInterval(runDecoding,a.speed,a))})